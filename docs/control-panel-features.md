# BDWind-GStreamer 控制面板功能

## 概述

BDWind-GStreamer 的控制面板提供了全面的视频质量控制、音频质量控制、显示设置和连接统计功能，允许用户实时调整流媒体参数以获得最佳的桌面共享体验。

## 功能特性

### 1. 视频质量控制

#### 1.1 视频比特率控制
- **功能**: 动态调整视频编码比特率
- **选项**: 250 kbps - 50 mbps
- **实时反馈**: 显示实际比特率与设置比特率的对比
- **用途**: 根据网络条件优化视频质量

#### 1.2 视频帧率控制
- **功能**: 调整视频捕获和编码帧率
- **选项**: 10 fps - 144 fps
- **实时反馈**: 显示实际帧率与设置帧率的对比
- **用途**: 平衡流畅度和性能消耗

#### 1.3 视频编码器选择
- **自动选择**: 系统自动选择最佳编码器
- **NVENC (硬件)**: NVIDIA GPU 硬件加速编码
- **VAAPI (硬件)**: Intel/AMD GPU 硬件加速编码
- **x264 (软件)**: CPU 软件编码，兼容性最好

#### 1.4 视频质量预设
- **低延迟**: 4 mbps, 60 fps, 1秒关键帧间隔
- **平衡**: 8 mbps, 60 fps, 2秒关键帧间隔
- **高质量**: 16 mbps, 60 fps, 3秒关键帧间隔
- **自定义**: 用户自定义所有参数

#### 1.5 关键帧间隔控制
- **功能**: 控制关键帧生成频率
- **范围**: 1-10 秒
- **影响**: 影响视频质量和网络适应性

### 2. 音频质量控制

#### 2.1 音频比特率控制
- **功能**: 调整音频编码比特率
- **选项**: 24 kb/s - 256 kb/s
- **实时反馈**: 显示实际音频比特率
- **用途**: 平衡音频质量和带宽使用

#### 2.2 音频采样率控制
- **选项**: 22.05 kHz, 44.1 kHz, 48 kHz, 96 kHz
- **默认**: 48 kHz (推荐用于专业音频)
- **用途**: 控制音频质量和文件大小

#### 2.3 音频声道控制
- **单声道**: 1 声道，最小带宽
- **立体声**: 2 声道，标准配置
- **5.1环绕声**: 6 声道，高质量音频

#### 2.4 音频编解码器选择
- **Opus**: 现代低延迟编解码器（推荐）
- **AAC**: 广泛兼容的编解码器
- **MP3**: 传统编解码器，最大兼容性

#### 2.5 音频增益控制
- **功能**: 调整音频输出音量
- **范围**: 0% - 200%
- **默认**: 100%

### 3. 显示设置

#### 3.1 分辨率控制
- **预设选项**: 720p, 1080p, 1440p, 4K
- **自定义**: 用户自定义分辨率
- **实时显示**: 显示当前实际分辨率

#### 3.2 缩放模式
- **适应窗口**: 保持宽高比，适应窗口大小
- **填充窗口**: 填满整个窗口，可能裁剪内容
- **拉伸**: 拉伸到窗口大小，可能变形
- **原始大小**: 显示原始分辨率

#### 3.3 显示器选择
- **主显示器**: 默认主显示器
- **多显示器支持**: 选择特定显示器进行捕获
- **动态刷新**: 支持刷新显示器列表

#### 3.4 显示选项
- **调整远程分辨率**: 根据客户端窗口调整分辨率
- **本地缩放**: 在客户端进行缩放处理
- **保持宽高比**: 维持原始宽高比

### 4. 连接统计显示

#### 4.1 连接状态概览
- **连接状态**: 显示 WebRTC 连接状态
- **连接类型**: 显示连接类型（直连/中继）
- **状态指示**: 颜色编码的状态指示器

#### 4.2 网络统计
- **延迟**: 实时往返延迟 (RTT)
- **可用带宽**: 当前可用网络带宽
- **包统计**: 接收包数和丢失包数
- **流量统计**: 发送和接收的字节数

#### 4.3 视频统计详情
- **编解码器信息**: 当前使用的视频编解码器
- **分辨率信息**: 实际传输分辨率
- **编码器信息**: 当前使用的编码器类型
- **性能指标**: 帧率、比特率、延迟的实时监控

#### 4.4 音频统计详情
- **编解码器信息**: 当前使用的音频编解码器
- **音频参数**: 采样率、声道数
- **性能指标**: 比特率、延迟的实时监控

#### 4.5 网络质量指示
- **丢包率**: 实时丢包率百分比
- **质量指示**: 颜色编码的网络质量指示
- **趋势图表**: 网络质量变化趋势

### 5. 控制面板操作

#### 5.1 设置管理
- **应用设置**: 一键应用所有当前设置
- **重置默认**: 恢复所有设置为默认值
- **导出设置**: 将当前设置导出为 JSON 文件
- **导入设置**: 从 JSON 文件导入设置配置

#### 5.2 系统操作
- **刷新显示器列表**: 重新检测可用显示器
- **全屏模式**: 进入/退出全屏模式
- **剪贴板访问**: 启用剪贴板同步功能

## 使用指南

### 快速开始
1. 打开 BDWind-GStreamer Web 界面
2. 点击右侧浮动菜单按钮打开控制面板
3. 根据网络条件调整视频质量设置
4. 点击"应用设置"使配置生效

### 性能优化建议

#### 低带宽环境
- 降低视频比特率至 1-2 mbps
- 降低帧率至 30 fps
- 使用较低的分辨率 (720p)
- 选择硬件编码器以减少 CPU 负载

#### 高质量需求
- 提高视频比特率至 16-25 mbps
- 保持 60 fps 或更高帧率
- 使用原生分辨率
- 启用高质量音频设置

#### 低延迟需求
- 使用"低延迟"预设
- 减少关键帧间隔
- 启用硬件编码
- 优化网络连接

### 故障排除

#### 视频质量问题
1. 检查网络带宽是否足够
2. 尝试降低比特率和帧率
3. 切换到不同的编码器
4. 检查 GPU 驱动程序

#### 音频问题
1. 检查音频设备是否正常工作
2. 尝试不同的音频编解码器
3. 调整音频增益设置
4. 检查系统音频配置

#### 连接问题
1. 检查网络连接状态
2. 查看连接统计中的丢包率
3. 尝试刷新页面重新连接
4. 检查防火墙设置

## 技术实现

### 前端技术
- **Vue.js 2.x**: 响应式用户界面框架
- **Vuetify**: Material Design 组件库
- **WebRTC**: 实时通信协议
- **WebSocket**: 信令通信

### 后端技术
- **Go**: 高性能服务器实现
- **GStreamer**: 多媒体处理框架
- **Pion WebRTC**: Go WebRTC 实现
- **Prometheus**: 指标收集和监控

### 数据流
1. 用户在控制面板调整设置
2. Vue.js 监听设置变化
3. 通过 WebRTC 数据通道发送控制消息
4. Go 后端接收并应用设置
5. GStreamer 管道动态调整参数
6. 实时统计信息反馈到前端

## 扩展功能

### 计划中的功能
- **预设配置管理**: 保存和管理多个配置预设
- **自动质量调整**: 根据网络条件自动调整质量
- **高级统计图表**: 历史性能数据可视化
- **移动端优化**: 针对移动设备的界面优化
- **多语言支持**: 国际化界面支持

### API 接口
控制面板的所有功能都可以通过 REST API 进行程序化控制，支持：
- 设置查询和修改
- 统计信息获取
- 系统状态监控
- 批量配置更新

## 总结

BDWind-GStreamer 的控制面板提供了全面而直观的桌面流媒体控制功能，支持实时调整各种参数以适应不同的使用场景和网络环境。通过丰富的统计信息显示和智能的质量控制选项，用户可以获得最佳的远程桌面体验。