# BDWind-GStreamer æ¶æ„é‡æ„è¿›åº¦

## ğŸ“‹ é‡æ„ç›®æ ‡

è§£å†³æ¶æ„é—®é¢˜ï¼š
1. `cmd/bdwind-gstreamer/main.go` å…¥å£ç¨‹åºä¸­æœ‰å¤§é‡Webä»£ç ï¼Œç»“æ„ä¸åˆç†
2. `internal/webserver/server.go` å¾ˆä¹±ï¼Œwebrtcã€signalingç­‰handleræ‹¥æŒ¤åœ¨ä¸€èµ·

## âœ… å·²å®Œæˆçš„é‡æ„

### 1. åˆ›å»ºhandlersåŒ… - èŒè´£åˆ†ç¦»
- âœ… `internal/handlers/webrtc.go` - WebRTCå¤„ç†å™¨
- âœ… `internal/handlers/capture.go` - æ¡Œé¢æ•è·å¤„ç†å™¨  
- âœ… `internal/handlers/system.go` - ç³»ç»Ÿå¤„ç†å™¨
- âœ… `internal/handlers/auth.go` - è®¤è¯å¤„ç†å™¨
- âœ… `internal/handlers/display.go` - æ˜¾ç¤ºå™¨å¤„ç†å™¨
- âœ… `internal/handlers/utils.go` - å·¥å…·å‡½æ•°

### 2. é‡æ„webserveråŒ… - ç®€åŒ–èŒè´£
- âœ… ç®€åŒ– `internal/webserver/server.go`ï¼Œç§»é™¤å†—ä½™çš„å¤„ç†å™¨æ–¹æ³•
- âœ… æ›´æ–° `internal/webserver/routes.go`ï¼Œä½¿ç”¨æ–°çš„å¤„ç†å™¨
- âœ… WebServeråªè´Ÿè´£WebæœåŠ¡æœ¬èº«ï¼Œä¸ç®¡ç†signalingå’Œmetricsç”Ÿå‘½å‘¨æœŸ

### 3. é‡æ„mainå…¥å£ - æ¸…æ™°æ¶æ„
- âœ… ç®€åŒ– `cmd/bdwind-gstreamer/main.go`ï¼Œåªè´Ÿè´£åº”ç”¨å¯åŠ¨
- âœ… é‡æ„ `cmd/bdwind-gstreamer/server.go` ä¸ºåº”ç”¨å±‚ï¼Œç®¡ç†æ‰€æœ‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
- âœ… åˆ é™¤ä¸å†éœ€è¦çš„ `cmd/bdwind-gstreamer/handlers.go` å’Œ `routes.go`

## ğŸ—ï¸ æ–°æ¶æ„è®¾è®¡

### èŒè´£åˆ†ç¦»
- **main.go**: åªè´Ÿè´£é…ç½®è§£æå’Œåº”ç”¨å¯åŠ¨
- **BDWindApp (server.go)**: ç®¡ç†æ‰€æœ‰ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
- **WebServer**: åªè´Ÿè´£HTTPæœåŠ¡å’Œè·¯ç”±
- **Handlers**: å„åŠŸèƒ½æ¨¡å—çš„å¤„ç†å™¨ï¼ŒèŒè´£å•ä¸€

### ä¾èµ–å…³ç³»
```
main.go
  â””â”€â”€ BDWindApp
      â”œâ”€â”€ WebServer (HTTPæœåŠ¡)
      â”‚   â””â”€â”€ Handlers (å¤„ç†å™¨)
      â”‚       â”œâ”€â”€ WebRTCHandler
      â”‚       â”œâ”€â”€ CaptureHandler
      â”‚       â”œâ”€â”€ SystemHandler
      â”‚       â”œâ”€â”€ AuthHandler
      â”‚       â””â”€â”€ DisplayHandler
      â”œâ”€â”€ SignalingServer (ä¿¡ä»¤)
      â”œâ”€â”€ Metrics (ç›‘æ§)
      â”œâ”€â”€ Capture (æ•è·)
      â””â”€â”€ Bridge (æ¡¥æ¥)
```

### æ–‡ä»¶ç»“æ„å¯¹æ¯”

#### é‡æ„å‰
```
cmd/bdwind-gstreamer/
â”œâ”€â”€ main.go (åŒ…å«å¤§é‡Webä»£ç )
â”œâ”€â”€ server.go (BDWindServer)
â”œâ”€â”€ handlers.go (æ‰€æœ‰å¤„ç†å™¨æ··åœ¨ä¸€èµ·)
â””â”€â”€ routes.go

internal/webserver/
â”œâ”€â”€ server.go (è‡ƒè‚¿ï¼ŒåŒ…å«æ‰€æœ‰å¤„ç†å™¨)
â””â”€â”€ routes.go
```

#### é‡æ„å
```
cmd/bdwind-gstreamer/
â”œâ”€â”€ main.go (ç®€æ´ï¼Œåªè´Ÿè´£å¯åŠ¨)
â””â”€â”€ server.go (BDWindAppï¼Œç®¡ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ)

internal/webserver/
â”œâ”€â”€ server.go (ç®€æ´ï¼Œåªè´Ÿè´£WebæœåŠ¡)
â””â”€â”€ routes.go (ä½¿ç”¨handlersåŒ…)

internal/handlers/
â”œâ”€â”€ webrtc.go (WebRTCå¤„ç†å™¨)
â”œâ”€â”€ capture.go (æ•è·å¤„ç†å™¨)
â”œâ”€â”€ system.go (ç³»ç»Ÿå¤„ç†å™¨)
â”œâ”€â”€ auth.go (è®¤è¯å¤„ç†å™¨)
â”œâ”€â”€ display.go (æ˜¾ç¤ºå™¨å¤„ç†å™¨)
â””â”€â”€ utils.go (å·¥å…·å‡½æ•°)
```

## ğŸ¯ æ¶æ„æ”¹è¿›ä¼˜åŠ¿

1. **æ¸…æ™°çš„èŒè´£åˆ†ç¦»**: æ¯ä¸ªåŒ…éƒ½æœ‰æ˜ç¡®çš„èŒè´£
2. **æ›´å¥½çš„å¯ç»´æŠ¤æ€§**: ä»£ç ç»„ç»‡æ›´åˆç†ï¼Œæ˜“äºç»´æŠ¤
3. **æ›´å¥½çš„å¯æµ‹è¯•æ€§**: å„ç»„ä»¶ç‹¬ç«‹ï¼Œä¾¿äºå•å…ƒæµ‹è¯•
4. **æ›´å¥½çš„æ‰©å±•æ€§**: æ–°åŠŸèƒ½å¯ä»¥ç‹¬ç«‹æ·»åŠ åˆ°å¯¹åº”çš„handlerä¸­
5. **ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¸…æ™°**: WebServerä¸å†ç®¡ç†å…¶ä»–ç»„ä»¶çš„å¯åŠ¨åœæ­¢

## ğŸ”§ å…³é”®æ”¹è¿›ç‚¹

### WebServerèŒè´£ç®€åŒ–
- **ä¹‹å‰**: WebServerç®¡ç†signalingã€metricsç­‰ç»„ä»¶çš„å¯åŠ¨åœæ­¢
- **ç°åœ¨**: WebServeråªè´Ÿè´£HTTPæœåŠ¡ï¼Œå…¶ä»–ç»„ä»¶ç”±BDWindAppç®¡ç†

### å¤„ç†å™¨æ¨¡å—åŒ–
- **ä¹‹å‰**: æ‰€æœ‰å¤„ç†å™¨æ–¹æ³•éƒ½åœ¨webserver/server.goä¸­ï¼Œæ–‡ä»¶è‡ƒè‚¿
- **ç°åœ¨**: æŒ‰åŠŸèƒ½åˆ†ç¦»åˆ°ä¸åŒçš„handleræ–‡ä»¶ä¸­ï¼ŒèŒè´£å•ä¸€

### åº”ç”¨å±‚ç»Ÿä¸€ç®¡ç†
- **ä¹‹å‰**: main.goç›´æ¥ç®¡ç†BDWindServer
- **ç°åœ¨**: main.goç®¡ç†BDWindAppï¼Œç”±Appç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç»„ä»¶

## ğŸ“ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **æµ‹è¯•éªŒè¯**: ç¡®ä¿é‡æ„ååŠŸèƒ½å®Œæ•´
2. **æ€§èƒ½æµ‹è¯•**: éªŒè¯é‡æ„æ²¡æœ‰æ€§èƒ½æŸå¤±
3. **æ–‡æ¡£æ›´æ–°**: æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œæ³¨é‡Š
4. **ä»£ç æ¸…ç†**: æ¸…ç†å¯èƒ½é—ç•™çš„å†—ä½™ä»£ç 

## ğŸ§¹ è¿›ä¸€æ­¥æ¸…ç†

### åˆ é™¤ä¸åˆç†çš„é…ç½®æ–‡ä»¶
- âœ… åˆ é™¤ `internal/webserver/config.go` - è¿‡äºå¤æ‚ï¼ŒwebserveråŒ…ä¸åº”è¯¥ç®¡ç†å…¶ä»–åŒ…çš„é…ç½®
- âœ… é…ç½®ç®¡ç†ç»Ÿä¸€ç”± `internal/config` åŒ…è´Ÿè´£
- âœ… webserveråŒ…ç°åœ¨åªå…³æ³¨WebæœåŠ¡æœ¬èº«çš„èŒè´£

### æœ€ç»ˆwebserveråŒ…ç»“æ„
```
internal/webserver/
â”œâ”€â”€ server.go (WebæœåŠ¡å™¨æ ¸å¿ƒ)
â”œâ”€â”€ routes.go (è·¯ç”±è®¾ç½®)
â”œâ”€â”€ middleware.go (Webä¸­é—´ä»¶)
â”œâ”€â”€ static.go (é™æ€æ–‡ä»¶å¤„ç†)
â””â”€â”€ static/ (é™æ€æ–‡ä»¶ç›®å½•)
```

## ğŸ¯ æœ€ç»ˆæ¶æ„ä¼˜åŠ¿

1. **èŒè´£å•ä¸€**: æ¯ä¸ªåŒ…éƒ½æœ‰æ˜ç¡®ä¸”å•ä¸€çš„èŒè´£
2. **é…ç½®ç»Ÿä¸€**: æ‰€æœ‰é…ç½®ç”±configåŒ…ç»Ÿä¸€ç®¡ç†
3. **ä¾èµ–æ¸…æ™°**: åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»æ¸…æ™°æ˜ç¡®
4. **æ˜“äºç»´æŠ¤**: ä»£ç ç»„ç»‡åˆç†ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•

---

**æœ€åæ›´æ–°**: 2025-07-29
**çŠ¶æ€**: é‡æ„å®Œæˆå¹¶æ¸…ç† âœ…
**æ¶æ„**: æ¨¡å—åŒ–ã€èŒè´£åˆ†ç¦»ã€é…ç½®ç»Ÿä¸€ã€ç”Ÿå‘½å‘¨æœŸæ¸…æ™°